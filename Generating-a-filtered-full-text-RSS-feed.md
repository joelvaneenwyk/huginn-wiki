# Generating a filtered full-text RSS feed from an existing RSS feed


__Problem__: Your favourite website has a feed but you only wish to read certain types of posts, and their feed only provides summarized text

__Solution__: Use Huginn to create an RSS feed that has filtered full-text content. The workflow to filter posts and fetch full text is as follows:

> 1. __RssAgent__ - to fetch and parse existing RSS feed
> 2. __TriggerAgent__ - to filter feed items
> 3. __WebsiteAgent__ - to fetch full text for feed item
> 4. __DataOutputAgent__ - to output RSS

Examples based on [النيلين](http://www.alnilin.com/category/الاخبار/feed/)

## 1. RssAgent

_Name_: Example RSS In

``` json
{
  "expected_update_period_in_days": "14",
  "clean": "false",
  "url": "http://www.alnilin.com/category/الاخبار/feed/"
}
```

## 2. TriggerAgent

_Name_: Example filter  
_Event sources_: Example RSS In  
_Propagate immediately_: Yes  

``` json
{
  "expected_receive_period_in_days": "14",
  "keep_event": "true",
  "rules": [
    {
      "type": "regex",
      "value": ".*\\/comic\\/.*",
      "path": "url"
    }
  ]
}
```

> __Note__: "keep_event": "true" helps pass on original parsed item elements to next agent


## 3. WebsiteAgent

_Name_: Example page fetch  
_Event sources_: Example filter  
_Propagate immediately_: Yes  

``` json
{
  "expected_update_period_in_days": "14",
  "url": "{{url}}",
  "type": "html",
  "mode": "merge",
  "extract": {
    "imgurl": {
      "css": "#comic img",
      "value": "@src"
    }
  }
}
```

> __Note__: "mode": "merge" helps pass on original parsed item elements to next agent


## 4. DataOutputAgent

_Name_: Example Rss out  
_Event sources_: Example page fetch  
_Propagate immediately_: Yes  

``` json
{
  "secrets": [
    "examplerss"
  ],
  "expected_receive_period_in_days": "14",
  "template": {
    "title": "Business Cat full comic feed",
    "description": "This is a feed of recent Business Cat comics generated by Huginn",
    "item": {
      "title": "{{title}}",
      "description": "<img src=\"{{imgurl}}\" />",
      "link": "{{url}}",
      "pubDate": "{{pubDate}}"
    }
  }
}
```